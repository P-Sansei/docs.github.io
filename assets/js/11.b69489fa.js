(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{225:function(e,t,a){"use strict";a.r(t);var v=a(2),_=Object(v.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"java系列-apachejmeter性能测试工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java系列-apachejmeter性能测试工具","aria-hidden":"true"}},[e._v("#")]),e._v(" Java系列-ApacheJmeter性能测试工具")]),e._v(" "),a("h2",{attrs:{id:"jmeter概述及安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jmeter概述及安装","aria-hidden":"true"}},[e._v("#")]),e._v(" Jmeter概述及安装")]),e._v(" "),a("p",[e._v("Apache JMeter是一款纯java编写负载功能测试和性能测试开源工具软件")]),e._v(" "),a("p",[a("strong",[e._v("运行环境")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Windows 10")]),e._v("，")]),e._v(" "),a("li",[a("code",[e._v("JDK 1.8")]),e._v("，")]),e._v(" "),a("li",[a("code",[e._v("JMeter 5.1.1")]),e._v("。")])]),e._v(" "),a("p",[a("strong",[e._v("安装步骤")])]),e._v(" "),a("ul",[a("li",[e._v("下载安装")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029191043.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("下载完成后解压zip包双击JMeter解压路径（...\\apache-jmeter-5.1.1\\bin）bin下面的启动"),a("code",[e._v("jmeter.bat")]),e._v("即可")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029191502.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("启动JMeter")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029193334.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("汉化配置(在37行下添加 "),a("code",[e._v("language=zh_CN")]),e._v(")\n"),a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029193231.png",alt:""}})])]),e._v(" "),a("h2",{attrs:{id:"jmeter脚本编写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jmeter脚本编写","aria-hidden":"true"}},[e._v("#")]),e._v(" JMeter脚本编写")]),e._v(" "),a("h3",{attrs:{id:"添加线程组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加线程组","aria-hidden":"true"}},[e._v("#")]),e._v(" 添加线程组")]),e._v(" "),a("p",[e._v("右键点击“测试计划” -> “添加” -> “Threads(Users)” -> “线程组”")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029194458.png",alt:""}})]),e._v(" "),a("p",[e._v("这里可以配置线程组名称，线程数，准备时长（Ramp-Up Period(in seconds)）循环次数，调度器等参数：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029194646.png",alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("参数说明：")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("线程数")]),e._v("：虚拟用户数。一个虚拟用户占用一个进程或线程。设置多少虚拟用户数在这里也就是设置多少个线程数。")]),e._v(" "),a("li",[a("code",[e._v("Ramp-Up Period(in seconds)准备时长")]),e._v("：设置的虚拟用户数需要多长时间全部启动。如果线程数为10，准备时长为2，那么需要2秒钟启动10个线程，也就是每秒钟启动5个线程。")]),e._v(" "),a("li",[a("code",[e._v("循环次数")]),e._v("：每个线程发送请求的次数。如果线程数为10，循环次数为100，那么每个线程发送100次请求。总请求数为10*100=1000 。如果勾选了“永远”，那么所有线程会一直发送请求，一到选择停止运行脚本。")]),e._v(" "),a("li",[a("code",[e._v("Delay Thread creation until needed")]),e._v("：直到需要时延迟线程的创建。")]),e._v(" "),a("li",[a("code",[e._v("调度器")]),e._v("：设置线程组启动的开始时间和结束时间(配置调度器时，需要勾选循环次数为永远)")]),e._v(" "),a("li",[a("code",[e._v("持续时间（秒）")]),e._v("：测试持续时间，会覆盖结束时间")]),e._v(" "),a("li",[a("code",[e._v("启动延迟（秒）")]),e._v("：测试延迟启动时间，会覆盖启动时间")]),e._v(" "),a("li",[a("code",[e._v("启动时间")]),e._v("：测试启动时间，启动延迟会覆盖它。当启动时间已过，手动只需测试时当前时间也会覆盖它。")]),e._v(" "),a("li",[a("code",[e._v("结束时间")]),e._v("：测试结束时间，持续时间会覆盖它。")])]),e._v(" "),a("p",[e._v("因为接口调试需要，暂时均使用默认设置，待后面真正执行性能测试时再回来配置。")]),e._v(" "),a("h3",{attrs:{id:"添加http请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加http请求","aria-hidden":"true"}},[e._v("#")]),e._v(" 添加HTTP请求")]),e._v(" "),a("p",[e._v("右键点击“线程组” -> “添加” -> “取样器” -> “HTTP请求”\n"),a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029195319.png",alt:""}})]),e._v(" "),a("p",[e._v("接口"),a("code",[e._v("http://www.baidu.com/s?ie=utf-8&wd=jmeter")]),e._v("性能测试,如下图显示")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029195555.png",alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Http请求主要参数详解：")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Web服务器")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("协议")]),e._v("：向目标服务器发送HTTP请求协议，可以是HTTP或HTTPS，默认为HTTP")]),e._v(" "),a("li",[a("code",[e._v("服务器名称或IP")]),e._v(" ：HTTP请求发送的目标服务器名称或IP")]),e._v(" "),a("li",[a("code",[e._v("端口号")]),e._v("：目标服务器的端口号，默认值为80")])])]),e._v(" "),a("li",[a("p",[e._v("Http请求")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("方法")]),e._v("：发送HTTP请求的方法，可用方法包括GET、POST、HEAD、PUT、OPTIONS、TRACE、DELETE等。")]),e._v(" "),a("li",[a("code",[e._v("路径")]),e._v("：目标URL路径（URL中去掉服务器地址、端口及参数后剩余部分）")]),e._v(" "),a("li",[a("code",[e._v("Content encoding")]),e._v(" ：编码方式，默认为ISO-8859-1编码，这里配置为utf-8")])])]),e._v(" "),a("li",[a("p",[e._v("同请求一起发送参数")]),e._v(" "),a("ul",[a("li",[e._v("在请求中发送的URL参数，用户可以将URL中所有参数设置在本表中，表中每行为一个参数（对应URL中的 name=value），注意参数传入中文时需要勾选“编码”")])])])]),e._v(" "),a("h3",{attrs:{id:"添加察看结果树"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加察看结果树","aria-hidden":"true"}},[e._v("#")]),e._v(" 添加察看结果树")]),e._v(" "),a("p",[e._v("右键点击“线程组” -> “添加” -> “监听器” -> “察看结果树”")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029195137.png",alt:""}})]),e._v(" "),a("p",[e._v("这时，运行Http请求，修改响应数据格式为“HTML Source Formatted”，可以看到本次搜索返回结果页面标题为”jmeter性能测试_百度搜索“。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029200224.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"添加用户自定义变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加用户自定义变量","aria-hidden":"true"}},[e._v("#")]),e._v(" 添加用户自定义变量")]),e._v(" "),a("p",[e._v("可以添加用户自定义变量用以Http请求参数化，右键点击“线程组” -> “添加” -> “配置元件” -> “用户定义的变量”：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029200608.png",alt:""}})]),e._v(" "),a("p",[e._v("新增一个参数wd，存放搜索词：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029200915.png",alt:""}})]),e._v(" "),a("p",[e._v("并在Http请求中使用该参数，格式为：${wd}")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191029201028.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"添加断言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加断言","aria-hidden":"true"}},[e._v("#")]),e._v(" 添加断言")]),e._v(" "),a("p",[e._v("右键点击“HTTP请求” -> “添加”-> “断言” -> “响应断言”")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107210326.png",alt:""}})]),e._v(" "),a("p",[e._v("校验返回的文本中是否包含搜索词，添加参数${wd}到要测试的模式中：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107210527.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"添加断言结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加断言结果","aria-hidden":"true"}},[e._v("#")]),e._v(" 添加断言结果")]),e._v(" "),a("p",[e._v("右键点击“HTTP请求” -> “添加”-> “监听器” -> “断言结果”")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107210715.png",alt:""}})]),e._v(" "),a("p",[e._v("这时，再运行一次就可以看到断言结果成功或失败了")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107211053.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"添加聚合报告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加聚合报告","aria-hidden":"true"}},[e._v("#")]),e._v(" 添加聚合报告")]),e._v(" "),a("p",[e._v("右键点击“线程组” -> “添加” -> “监听器” -> “聚合报告”，用以存放性能测试报告")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107211151.png",alt:""}})]),e._v(" "),a("p",[e._v("这样，就完成了一个完整Http接口的JMeter性能测试脚本编写。")]),e._v(" "),a("h2",{attrs:{id:"执行性能测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行性能测试","aria-hidden":"true"}},[e._v("#")]),e._v(" 执行性能测试")]),e._v(" "),a("h3",{attrs:{id:"配置线程组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置线程组","aria-hidden":"true"}},[e._v("#")]),e._v(" 配置线程组")]),e._v(" "),a("p",[e._v("点击线程组，配置本次性能测试相关参数："),a("code",[e._v("线程数")]),e._v("，"),a("code",[e._v("循环次数")]),e._v("，"),a("code",[e._v("持续时间")]),e._v("等，这里我们配置并发用户数为"),a("code",[e._v("10")]),e._v("，持续时间为"),a("code",[e._v("60s")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107211424.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"执行测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行测试","aria-hidden":"true"}},[e._v("#")]),e._v(" 执行测试")]),e._v(" "),a("p",[e._v("点击绿色小箭头按钮即可启动测试，测试之前需要点击小扫把按钮清除之前的调试结果。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107211702.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"分析测试报告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析测试报告","aria-hidden":"true"}},[e._v("#")]),e._v(" 分析测试报告")]),e._v(" "),a("p",[e._v("待性能测试执行完成后，打开聚合报告可以看到：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p-blog.gitee.io/pic-repo/images/java/jmeter_20191107211807.png",alt:""}})]),e._v(" "),a("p",[e._v("聚合报告参数详解：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Label")]),e._v("：每个 JMeter 的 element（例如 HTTP Request）都有一个 Name 属性，这里显示的就是 Name 属性的值")]),e._v(" "),a("li",[a("code",[e._v("#Samples")]),e._v("：请求数——表示这次测试中一共发出了多少个请求，如果模拟10个用户，每个用户迭代10次，那么这里显示100")]),e._v(" "),a("li",[a("code",[e._v("Average")]),e._v("：平均响应时间——默认情况下是单个 Request 的平均响应时间，当使用了 Transaction Controller 时，以Transaction 为单位显示平均响应时间")]),e._v(" "),a("li",[a("code",[e._v("Median")]),e._v("：中位数，也就是 50％ 用户的响应时间")]),e._v(" "),a("li",[a("code",[e._v("90% Line")]),e._v("：90％ 用户的响应时间")]),e._v(" "),a("li",[a("code",[e._v("Min")]),e._v("：最小响应时间")]),e._v(" "),a("li",[a("code",[e._v("Max")]),e._v("：最大响应时间")]),e._v(" "),a("li",[a("code",[e._v("Error%")]),e._v("：错误率——错误请求数/请求总数")]),e._v(" "),a("li",[a("code",[e._v("Throughput")]),e._v("：吞吐量——默认情况下表示每秒完成的请求数（Request per Second），当使用了 Transaction Controller 时，也可以表示类似 LoadRunner 的 Transaction per Second 数")]),e._v(" "),a("li",[a("code",[e._v("KB/Sec")]),e._v("：每秒从服务器端接收到的数据量，相当于LoadRunner中的Throughput/Sec")])]),e._v(" "),a("p",[a("strong",[e._v("一般而言，性能测试中需要重点关注的数据有：")]),a("code",[e._v("#Samples 请求数")]),e._v("，"),a("code",[e._v("Average 平均响应时间")]),e._v("，"),a("code",[e._v("Min 最小响应时间")]),e._v("，"),a("code",[e._v("Max 最大响应时间")]),e._v("，"),a("code",[e._v("Error% 错误率")]),e._v("及"),a("code",[e._v("Throughput 吞吐量")]),e._v("。")])])},[],!1,null,null,null);t.default=_.exports}}]);